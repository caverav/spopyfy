CREATE TABLE personas(
	id INTEGER GENERATED ALWAYS AS IDENTITY,
	nombre VARCHAR NOT NULL,
	apellido VARCHAR,
	email VARCHAR NOT NULL,
	password VARCHAR NOT NULL,
	PRIMARY KEY(id)
);

CREATE TABLE usuarios(
	id INTEGER GENERATED ALWAYS AS IDENTITY,
	suscripcion_activa BOOL,
	PRIMARY KEY(id)
) INHERITS (personas);

CREATE TABLE artistas(
	id INTEGER GENERATED ALWAYS AS IDENTITY,
	nombre_artistico VARCHAR,
	verificado BOOL,
	PRIMARY KEY(id)
) INHERITS (personas);

CREATE TABLE canciones(
	id INTEGER GENERATED ALWAYS AS IDENTITY,
	nombre VARCHAR,
	letra VARCHAR,
	fecha_composicion DATE,
	PRIMARY KEY(id)
);

CREATE TABLE album(
	id INTEGER GENERATED ALWAYS AS IDENTITY,
	nombre VARCHAR,
	imagen VARCHAR,
	fecha_lanzamiento DATE,
	PRIMARY KEY(id)
);

CREATE TABLE artista_compuso_cancion(
	id_artista INTEGER,
	id_cancion INTEGER,
	PRIMARY KEY(id_artista, id_cancion),
	FOREIGN KEY(id_artista) REFERENCES artistas(id),
	FOREIGN KEY(id_cancion) REFERENCES canciones(id)
);

CREATE TABLE album_tiene_cancion(
	id_album INTEGER,
	id_cancion INTEGER,
	PRIMARY KEY(id_album, id_cancion),
	FOREIGN KEY(id_album) REFERENCES album(id),
	FOREIGN KEY(id_cancion) REFERENCES canciones(id)
);
