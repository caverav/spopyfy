<?php include '../include/navbar.html' ?>
<?php include '../db_config.php' ?>
<?php
    //Agregar canciones
    if(isset($_POST['ADD_SONG']) && $_POST['ADD_SONG'] == "true"){
        $sql = "INSERT INTO canciones (nombre, letra, fecha_composicion) VALUES ($1, $2, $3)";
        $result = pg_query_params($dbconn, $sql, array($_POST['nombre'], $_POST['letra'], $_POST['fecha_composicion']));
        //TODO: crear alertas de error y exito
    }
?>

<body>
    <div id="app">
        <?php include '../include/sidebar.php' ?>
        <!-- PÁGINA PRINCIPAL -->
        <main class="pt-16 p-4 sm:pl-64">

            <h1 class="text-xs tracking-wider text-center text-gray-700 uppercase">Manejar canciones</h1>
            <div class="flex justify-center mt-4">
                <form action="crud_canciones.html" method="POST">
                    <div class="flex flex-wrap mb-6 -mx-3">
                        <div class="w-full px-3 mb-6 md:mb-0">
                            <label class="block mb-2 text-xs font-bold tracking-wide text-gray-700 uppercase" for="name">
                                Nombre
                            </label>
                            <input class="block w-full px-4 py-3 leading-tight text-gray-700 border border-gray-200 rounded appearance-none focus:outline-none focus:bg-white focus:border-gray-500" id="grid-first-name" type="text" name="nombre" required>
                        </div>
                        <div class="w-full px-3 mb-6 md:mb-0">
                            <label class="block mb-2 text-xs font-bold tracking-wide text-gray-700 uppercase" for="lyrics">
                                Letra
                            </label>
                            <input class="block w-full px-4 py-3 leading-tight text-gray-700 border border-gray-200 rounded appearance-none focus:outline-none focus:bg-white focus:border-gray-500" id="grid-last-name" type="text" name="letra" required>
                        </div>
                        <div class="w-full px-3 mb-6 md:mb-0">
                            <label class="block mb-2 text-xs font-bold tracking-wide text-gray-700 uppercase" for="date">
                                Fecha de composición
                            </label>
                            <input class="block w-full px-4 py-3 leading-tight text-gray-700 border border-gray-200 rounded appearance-none focus:outline-none focus:bg-white focus:border-gray-500" id="grid-last-name"
                                type="date" name="fecha_composicion" required>
                        </div>
                        <input type="hidden" name="ADD_SONG" value="true">
                    </div>
                    <div class="flex justify-center">
                        <button class="px-4 py-2 font-bold text-white bg-pink-500 rounded hover:bg-pink-700 focus:outline-none focus:shadow-outline" type="submit">
                            Agregar canción
                        </button>
                    </div>
                </form>
            </div>
                <?php
                    //TODO: revisar cuales canciones mostrar

<<<<<<< HEAD
                    $sql = "SELECT * FROM canciones";
                    $result_users = pg_query_params($dbconn, $sql, array());
                    if (!$result_users) {
                        echo "Error al ejecutar la consulta.\n";
                        exit;
                    }
                    while ($row = pg_fetch_row($result_users)) {
                        echo '<div class="p-4 mt-4 font-semibold text-center bg-white rounded shadow hover:shadow-md">';
                        echo '<a href="crud_canciones.php?id_cancion='.htmlspecialchars($row[0]).'">';
                        echo '<h2 class="text-2xl text-gray-700">'.htmlspecialchars($row[1]).'</h2>';
                        echo '<p class="text-gray-700">'.htmlspecialchars($row[2]).'</p>';
                        echo '</a>';
                        echo '</div>';
                    }

                ?>
=======
            <?php include '../include/alert.php'; ?>

                <div class="p-5 mt-4 font-medium text-center bg-white rounded shadow hover:shadow-md">
                    <form action="../include/conn_to_songs.php" method="POST">
                        <p m-0 p-0 font-bold>Nombre</p>
                        <input type="text" id="nombre" name="nombre" placeholder="Nombre de la canción" class="w-full text-center h-10 mb-5 text-lg bg-transparent border-b-2 border-white outline-none">
                        <p m-0 p-0 font-bold>Letra</p>
                        <input type="text" id="letra" name="letra" placeholder="Ingresa los lyrics" class="w-full text-center h-10 mb-5 text-lg bg-transparent border-b-2 border-white outline-none">
                        <p m-0 p-0 font-bold>Fecha de composición</p>
                        <input type="date" id="fecha" name="fecha" placeholder="Ingresa la fecha" class="w-full text-center h-10 mb-5 text-lg bg-transparent border-b-2 border-white outline-none">
                        <input type="submit" name="" value="Enviar" class="w-full h-10 mb-5 font-medium text-black bg-red-400 border-r-8 border-none rounded-lg outline-none pointer-events-auto hover:bg-red-300">
                    </form>
                </div>


>>>>>>> 753a5b6a9baaa4f51780e79b20d266565a1bccbb
        </main>
    </div>
</body>
</html>
